<div [formGroup]="form" fxFlex style="margin: 5px;">

    <ng-container [ngSwitch]="question.controlType">

        <mat-form-field *ngSwitchCase="'textbox'" fxFlex>
            <input matInput [placeholder]="question.label" [formControlName]="question.key" [id]="question.key"
                [type]="question.type">
            <mat-hint *ngIf="question.hint">{{question.hint}}</mat-hint>
        </mat-form-field>

        <mat-form-field *ngSwitchCase="'dropdown'" fxFlex>
            <mat-select [placeholder]="question.label" [formControlName]="question.key">
                <ng-container *ngIf="question.options$">
                    <mat-option *ngFor="let opt of question.options$ | async" [value]="opt[question.selection.key]">
                        {{opt[question.selection.value]}}
                    </mat-option>
                </ng-container>
                <ng-container *ngIf="question.options">
                    <mat-option *ngFor="let opt of question.options" [value]="opt[question.selection.key]">
                        {{opt[question.selection.value]}}
                    </mat-option>
                </ng-container>
            </mat-select>
            <mat-hint *ngIf="question.hint">{{question.hint}}</mat-hint>
            <mat-error *ngIf="!isValid">
                {{question.label}} is <strong>required</strong>
            </mat-error>
        </mat-form-field>

        <div *ngSwitchCase="'chipSelector'" fxFlex>
            <app-chip-selector [options]="question.options$ | async" [defaultOptions]="question.value"
                [defaultOptionsKey]="question.selection.key" [placeholder]="question.label"
                [displayKey]="question.selection.value" [filterKey]="question.selection.value" [hint]="question.hint"
                [validators]="question.validators" (output)="setMutlipleValues($event)" fxFlex>
            </app-chip-selector>
        </div>

        <div *ngSwitchCase="'autoComplete'" fxFlex>
            <app-auto-complete [options]="question.options$ | async" [defaultOption]="question.value"
                [defaultOptionKey]="question.selection.key" [placeholder]="question.label"
                [displayKey]="question.selection.value" [filterKey]="question.selection.value" [hint]="question.hint"
                [validators]="question.validators" (output)="setSingleValue($event)" fxFlex>
            </app-auto-complete>
        </div>

    </ng-container>
</div>